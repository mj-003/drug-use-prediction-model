<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drug Analysis | Prediction</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="{{ url_for('home') }}">
          <i class="fas fa-brain me-2"></i>
          Drug Analysis ML
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('home') }}">
                <i class="fas fa-home me-1"></i> Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="{{ url_for('predict') }}">
                <i class="fas fa-chart-line me-1"></i> Predict
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('visualize') }}">
                <i class="fas fa-chart-bar me-1"></i> Visualize
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <h1 class="display-5 fw-bold mb-4 animate-fade">
        <i class="fas fa-chart-line me-3"></i>Predykcja Używania Narkotyków
      </h1>

      <div class="row">
        <div class="col-lg-8">
          <div class="card animate-fade">
            <div class="card-header">
              <h3><i class="fas fa-user me-2"></i>Wprowadź dane profilu</h3>
            </div>
            <div class="card-body">
              <form method="post" action="{{ url_for('predict') }}">
                <div class="row g-4">
                  <!-- Dane demograficzne -->
                  <div class="col-12">
                    <h5
                      class="border-bottom pb-2 mb-3"
                      style="color: var(--accent-primary)"
                    >
                      <i class="fas fa-id-card me-2"></i>Dane demograficzne
                    </h5>
                  </div>

                  <div class="col-md-4">
                    <label for="Age" class="form-label">Wiek</label>
                    <select class="form-select" id="Age" name="Age" required>
                      <option value="0">18-24</option>
                      <option value="1">25-34</option>
                      <option value="2">35-44</option>
                      <option value="3">45-54</option>
                      <option value="4">55-64</option>
                      <option value="5">65+</option>
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label for="Gender" class="form-label">Płeć</label>
                    <select
                      class="form-select"
                      id="Gender"
                      name="Gender"
                      required
                    >
                      <option value="0">Kobieta</option>
                      <option value="1">Mężczyzna</option>
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label for="Education" class="form-label"
                      >Poziom edukacji</label
                    >
                    <select
                      class="form-select"
                      id="Education"
                      name="Education"
                      required
                    >
                      <option value="0">Podstawowe</option>
                      <option value="1">Gimnazjalne</option>
                      <option value="2">Średnie</option>
                      <option value="3">Policealne</option>
                      <option value="4">Licencjat</option>
                      <option value="5">Magisterskie</option>
                      <option value="6">Doktorat</option>
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label for="Country" class="form-label">Kraj</label>
                    <select class="form-select" id="Country" name="Country" required>
                        <option value="0">Australia</option>
                        <option value="1">Kanada</option>
                        <option value="2">Nowa Zelandia</option>
                        <option value="3">Inne</option>
                        <option value="4">Irlandia</option>
                        <option value="5">Wielka Brytania</option>
                        <option value="6">USA</option>
                    </select>
                </div>

                <div class="col-md-4">
                  <label for="Ethnicity" class="form-label">Pochodzenie etniczne</label>
                  <select class="form-select" id="Ethnicity" name="Ethnicity" required>
                      <option value="0">Azjatyckie</option>
                      <option value="1">Czarne</option>
                      <option value="2">Mieszane - Czarne/Azjatyckie</option>
                      <option value="3">Mieszane - Białe/Azjatyckie</option>
                      <option value="4">Mieszane - Białe/Czarne</option>
                      <option value="5">Inne</option>
                      <option value="6" selected>Białe</option>
                  </select>
              </div>

                  <!-- Cechy osobowości -->
                  <div class="col-12 mt-4">
                    <h5
                      class="border-bottom pb-2 mb-3"
                      style="color: var(--accent-primary)"
                    >
                      <i class="fas fa-brain me-2"></i>Cechy osobowości
                    </h5>
                  </div>

                  <div class="col-md-4">
                    <label for="Nscore" class="form-label"
                      >Neurotyczność (Nscore)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-chart-line"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="Nscore"
                        name="Nscore"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="Escore" class="form-label"
                      >Ekstrawersja (Escore)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-users"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="Escore"
                        name="Escore"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="Oscore" class="form-label"
                      >Otwartość (Oscore)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-lightbulb"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="Oscore"
                        name="Oscore"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="AScore" class="form-label"
                      >Ugodowość (AScore)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-handshake"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="AScore"
                        name="AScore"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="Cscore" class="form-label"
                      >Sumienność (Cscore)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-check-double"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="Cscore"
                        name="Cscore"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="Impulsive" class="form-label"
                      >Impulsywność</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-bolt"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="Impulsive"
                        name="Impulsive"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <div class="col-md-4">
                    <label for="SS" class="form-label"
                      >Poszukiwanie doznań (SS)</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="fas fa-mountain"></i
                      ></span>
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        id="SS"
                        name="SS"
                        required
                        placeholder="-3.0 do 3.0"
                        min="-3"
                        max="3"
                      />
                    </div>
                    <small class="form-text text-muted"
                      >Typowy zakres: -3.0 do 3.0</small
                    >
                  </div>

                  <!-- Zdrowie psychiczne -->
                  <div class="col-md-8">
                    <label for="Mental health level" class="form-label"
                      >Poziom zdrowia psychicznego</label
                    >
                    <select
                      class="form-select"
                      id="Mental health level"
                      name="Mental health level"
                      required
                    >
                      <option value="1">
                        Niski (poniżej 5% populacji z depresją)
                      </option>
                      <option value="2">
                        Średnio-niski (5-6% populacji z depresją)
                      </option>
                      <option value="3">
                        Średnio-wysoki (6-7% populacji z depresją)
                      </option>
                      <option value="4">
                        Wysoki (powyżej 7% populacji z depresją)
                      </option>
                    </select>
                  </div>

                  <div class="col-12 mt-4 text-center">
                    <button type="submit" class="btn btn-primary btn-lg">
                      <i class="fas fa-chart-line me-2"></i>Przeprowadź
                      predykcję
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card animate-fade animate-delay-1">
            <div class="card-header">
              <h3><i class="fas fa-info-circle me-2"></i>O cechach</h3>
            </div>
            <div class="card-body">
              <h5 style="color: var(--accent-primary)">Model Big Five</h5>
              <ul class="mb-4">
                <li>
                  <strong>Neurotyczność (N):</strong> Tendencja do doświadczania
                  emocji negatywnych
                </li>
                <li>
                  <strong>Ekstrawersja (E):</strong> Poziom energii i
                  towarzyskości
                </li>
                <li>
                  <strong>Otwartość (O):</strong> Ciekawość intelektualna i
                  kreatywność
                </li>
                <li>
                  <strong>Ugodowość (A):</strong> Zdolność do współpracy i
                  empatii
                </li>
                <li>
                  <strong>Sumienność (C):</strong> Zorganizowanie i
                  odpowiedzialność
                </li>
              </ul>

              <h5 style="color: var(--accent-primary)">Dodatkowe cechy</h5>
              <ul>
                <li>
                  <strong>Impulsywność:</strong> Tendencja do działania bez
                  zastanowienia
                </li>
                <li>
                  <strong>Poszukiwanie doznań (SS):</strong> Potrzeba nowych,
                  różnorodnych i intensywnych doświadczeń
                </li>
              </ul>

              <div
                class="alert alert-primary mt-4"
                style="
                  background-color: rgba(187, 134, 252, 0.1);
                  border-color: var(--accent-primary);
                  color: var(--text-primary);
                "
              >
                <i class="fas fa-info-circle me-2"></i> Wartości dla wszystkich
                cech osobowości powinny mieścić się w przedziale od -3.0 do 3.0,
                gdzie 0 oznacza wartość średnią w populacji.
              </div>
            </div>
          </div>

          {% if result %}
          <div class="card mt-4 animate-fade">
            <div
              class="card-header"
              style="background-color: {% if result.risk_level == 'High' %}rgba(207, 102, 121, 0.2){% elif result.risk_level == 'Medium' %}rgba(255, 183, 77, 0.2){% else %}rgba(129, 199, 132, 0.2){% endif %}; color: {% if result.risk_level == 'High' %}var(--danger){% elif result.risk_level == 'Medium' %}var(--warning){% else %}var(--success){% endif %};"
            >
              <h3><i class="fas fa-chart-bar me-2"></i>Wynik predykcji</h3>
            </div>
            <div class="card-body">
              <h5 class="mb-3">Prawdopodobieństwo używania narkotyków:</h5>
              <div class="progress mb-4">
                <div
                  class="progress-bar {% if result.risk_level == 'High' %}bg-danger{% elif result.risk_level == 'Medium' %}bg-warning{% else %}bg-success{% endif %}"
                  role="progressbar"
                  style="width: {{ result.probability*100 }}%"
                  aria-valuenow="{{ result.probability*100 }}"
                  aria-valuemin="0"
                  aria-valuemax="100"
                >
                  {{ "%.2f"|format(result.probability*100) }}%
                </div>
              </div>

              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <span class="text-muted">0%</span>
                <span class="text-muted">50%</span>
                <span class="text-muted">100%</span>
              </div>

              <!-- <div
                class="alert {% if result.risk_level == 'High' %}alert-danger{% elif result.risk_level == 'Medium' %}alert-warning{% else %}alert-success{% endif %}"
                style="background-color: {% if result.risk_level == 'High' %}rgba(207, 102, 121, 0.1){% elif result.risk_level == 'Medium' %}rgba(255, 183, 77, 0.1){% else %}rgba(129, 199, 132, 0.1){% endif %}; 
                                    color: {% if result.risk_level == 'High' %}var(--danger){% elif result.risk_level == 'Medium' %}var(--warning){% else %}var(--success){% endif %}; 
                                    border-color: {% if result.risk_level == 'High' %}var(--danger){% elif result.risk_level == 'Medium' %}var(--warning){% else %}var(--success){% endif %};"
              > -->
                <div class="d-flex">
                  <div class="me-3">
                    <i
                      class="fas {% if result.risk_level == 'High' %}fa-exclamation-triangle{% elif result.risk_level == 'Medium' %}fa-exclamation-circle{% else %}fa-check-circle{% endif %} fa-2x"
                    ></i>
                  </div>
                  <div>
                    <h5 class="alert-heading mb-1">
                      {{ result.risk_level }} Risk
                    </h5>
                    <p class="mb-0">
                      {% if result.risk_level == 'High' %} Bardzo wysokie
                      prawdopodobieństwo używania narkotyków. {% elif
                      result.risk_level == 'Medium' %} Umiarkowane
                      prawdopodobieństwo używania narkotyków. {% else %} Niskie
                      prawdopodobieństwo używania narkotyków. {% endif %}
                    </p>
                  </div>
                </div>
              </div>

              <div class="mt-4 ms-4">
                <h6>Interpretacja wyniku:</h6>
                <p class="mb-4 text-muted">
                  {% if result.risk_level == 'High' %} Profil wskazuje na cechy
                  mocno skorelowane z używaniem narkotyków, w tym wysoką
                  impulsywność i poszukiwanie doznań. {% elif result.risk_level
                  == 'Medium' %} Profil zawiera mieszankę czynników ryzyka i
                  czynników ochronnych związanych z używaniem narkotyków. {%
                  else %} Profil zawiera niewiele czynników ryzyka związanych z
                  używaniem narkotyków. {% endif %}
                </p>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <footer class="bg-dark text-center text-white-50 py-4 mt-5">
      <div class="container">
        <p class="mb-0">
          © 2025 Drug Analysis ML | Projekt z użyciem uczenia maszynowego i
          GenAI
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
